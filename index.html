<html>
    <head>
        <title>Game</title>
		
		<!--Load Library-->
		<script type="text/javascript" src="lib/three67.min.js"></script>
		<script type="text/javascript" src="lib/cannon.js" ></script>
		<script type="text/javascript" src="lib/stats.min.js" ></script>
		<script type="text/javascript" src="lib/PointerLockControlsCannon.js" ></script>

		<script type="text/javascript" src="js/init.js" ></script>
		<script type="text/javascript" src="js/functions.js"></script>
		<script type="text/javascript" src="js/collisions.js"></script>
		<script type="text/javascript" src="js/camera.js"></script>
		<script type="text/javascript" src="js/stage.js"></script>
		<script type="text/javascript" src="js/controls.js"></script>
		<script type="text/javascript" src="js/updateStage.js"></script>
		
		<script type="text/javascript" src="data/data.js"></script>
		<script type="text/javascript" src="data/materials/materials.js"></script>
		
		<!--No use-->
		<!--
			<script type="text/javascript" src="lib/DatGUI.js" ></script>
		-->
		<link type="text/css" rel="stylesheet" href="css/style.css" />
    </head>
    <body>
		<div id="info">
			<p style="margin: 0px auto;">WIP</p>
			<span id="time">00:00:00</span>
			<span>     Clique pour commencer.</span>
			<br>
			<span>Déplacement type fps</span>
			<br>
			<span>Après 9sc une plateforme disparait.</span>
		</div>		
        <script async type="text/javascript">
		
		/*
		var gui = new dat.GUI();
		var f1 = gui.addFolder('Friction');
		f1.add(app, 'friction', 2, 1000).step(1);
		*/
		
		var controls,time = Date.now();
		
		
		///////////////
		//Stats
		///////////////
		var stats = new Stats();
		stats.setMode(0); // 0: fps, 1: ms
		stats.domElement.style.position = 'absolute';
		stats.domElement.style.left = '0px';
		stats.domElement.style.top = '0px';

		document.body.appendChild( stats.domElement );
		
		//TEMP
		var check = app.images("img/checkerboard.jpg");
		var check = app.images("data/textures/textures_batiment_NRM.jpg");
		var check = app.images("data/textures/textures_batiment_SPEC.jpg");
		var check = app.images("data/textures/textures_batiment.jpg");

		window.onload = function(e){ 
		
			//chronometre
			var instance = self.setInterval(changeTime ,1000);
			
			app.activePointerLock();
			app.init_Cannon();
			app.init_scene();//Scene création
			
			app.load_all_files(data);
			
			app.stage();//Placement des elements
			
			app.animate(app.delta);//refresh animation/render
			
			window.addEventListener( 'resize', onWindowResize, false );
		
		
		
			setTimeout(function(){
				removeObject("plateforme_remove");
			},9000);
		}

			
        </script>
		<canvas id="mycanvas">Canvas is not supported :(</canvas>
    </body>
</html>